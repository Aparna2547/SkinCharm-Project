<%- include("../admin/header.ejs") %>



	<!-- SIDEBAR -->
	<section id="sidebar">
		<!-- <a href="#" class="brand"> -->
			<img src="/admin/assets/logo.png" style="width:5rem;height:5rem;margin-top: 20%;margin-left: 10%; border-radius: 50%;" alt="...">

		</a>
		<ul class="side-menu top">
            <li >
                <a href="/admin/home" class="text-decoration-none">
            <!-- <i class='bx bxs-dashboard me-0'></i><i class="fa fa-dashboard ms-1"></i>&nbsp; -->
			<i class="fas fa-chart-line" style="font-size: 24px"></i>

            <span class="text mx-2 fw-bold">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="/admin/user" class="text-decoration-none">
                    <!-- <img src="/admin/assets/usericon.png" alt="user" style="width:1rem;">&nbsp;&nbsp; -->
					<i class="fas fa-users" style="font-size: 24px"></i>

                    <span class="text mx-2 fw-bold">Users</span>
                </a>
            </li>
            <li>
                <a href="/admin/category" class="text-decoration-none">
					<!-- <i class="fas fa-th-list" style="font-size: 24px"></i> -->

                    <img src="/admin/assets/category.png" alt="user" style="width:1rem;">&nbsp;&nbsp;
                    <span class="text  mx-2 fw-bold">Categories</span>
                </a>
            </li>
            <li class="active">
                <a href="/admin/product" class="text-decoration-none">
                    <!-- <img src="/admin/assets/producticon.png" alt="product" style="width:1.3rem;">&nbsp;&nbsp; -->

					<i class="fas fa-cubes " style="font-size: 24px"></i>
					<span class="text  mx-2 fw-bold">Product</span>
                </a>
            </li>
			<li>
				<a href="/admin/orders" class="text-decoration-none">
					<i class="fa fa-truck fw-bold" aria-hidden="true"></i>

					<span class="text mx-2 fw-bold">Order</span>
				</a>
			</li>
			<li>
				<a href="/admin/coupons" class="text-decoration-none">
					<i class='fas fa-tag' style='font-size:24px'></i>
					<span class="text mx-2 fw-bold">Coupons</span>
				</a>
			</li>
			<li>
				<a href="/admin/banner">
					<i class="fas fa-image" style="font-size: 24px"></i>
					<span class="text  mx-2 fw-bold">Banner</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="/admin/adminLogout" class="logout btn text-white fw-bold ls w-75" style="border-radius:0; background-color: rgb(156, 11, 11);">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->




    <!-- CONTENT -->
    <section id="content">
        <!-- NAVBAR -->
        <nav>
            <i class='bx bx-menu'></i>
            <form action="#">
                <div class="form-input">
                    <!-- for the space -->

                </div>
            </form>
        </nav>
        <!-- NAVBAR -->

        <!-- MAIN -->
        <main>
            <!-- <div class="head-title">
                <div class="left">
                    <h1>Products</h1>
                    <ul class="breadcrumb">
                        <li>
                            <a href="/admin/home">Dashboard</a>
                        </li>
                        <li><i class='bx bx-chevron-right'></i></li>
                        <li>
                            <a class="active" href="/admin/product">Product</a>
                        </li>
                    </ul>
                </div>
            </div> -->
            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Product</h3>
                        <div class="col-xs-12 col-sm-4">
                            <form class="search-box d-flex">
                                <input type="text" name="search" class="form-control d-inline" name="search" placeholder="Search...">
                                <!-- <button class="btn btn-light d-inline" type="submit">Search</button> -->
                            </form>
                        </div>
                        <a href="/admin/addProduct"  class="btn btn-primary">add new product</a>
                        <!-- <button   class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#staticBackdrop">add new product</button> -->

<!-- forr brands -->
   


                    </div>
                    <div class="text-success">
                    <p>   <%= locals.context?context:"" %></p> 
                    </div>
                  
                    <table>
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Product</th>
                                <th>Category</th>
                                <th>Brand</th>
                                <th>Actual Price</th>
                                <th>Selling Price</th>
                                <th>Stock</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% Data.forEach(prdt=>{ %>
                                <tr>
                                    <td>
                                        <img class="img-fluid"  src="/images/<%= prdt.image[0]?.filename%>" alt="<%= prdt.image%>">
                                    </td>
                                    <td><%= prdt.productname%></td>
                                    <td><%= prdt.category?.category%></td>
                                    <td><%= prdt.brand%></td>
                                    <td><%= prdt.actualPrice %></td>
                                    <td><%= prdt.sellingPrice %></td>
                                    <td><%= prdt.stock %></td>
                                    <td>
                                        <a  class="btn btn-info" href="/admin/editProduct?_id=<%=prdt._id %>">EDIT</a>
                                        <a class="btn  <%= prdt.isListed ? 'btn-info': 'btn-danger' %>"
                                            href="/admin/listproduct?_id=<%= prdt._id %>"
                                            data-toggle="modal" data-target="#listeditModal<%= prdt._id%>">
                                            <%= prdt.isListed ? 'List' : 'Unlist' %></a>
                               
                               
                                             <!-- Modal -->
                                             <div class="modal fade" id="listeditModal<%= prdt._id%>" tabindex="-1" role="dialog"
                                             aria-labelledby="confirmationModalLabel" aria-hidden="true">
                                             <div class="modal-dialog" role="document">
                                                 <div class="modal-content">
                                                     <div class="modal-header">
                                                         <h5 class="modal-title" id="confirmationModalLabel">Confirmation
                                                         </h5>
                                                         <button type="button" class="close" data-dismiss="modal"
                                                             aria-label="Close">
                                                             <span aria-hidden="true">&times;</span>
                                                         </button>
                                                     </div>
                                                     <div class="modal-body">
                                                         <!-- Add confirmation message or content here -->
                                                         Are you sure you want to <%= prdt.isListed ? 'Unlist' : 'list' %>
                                                             this product?
                                                     </div>
                                                     <div class="modal-footer">
                                                         <button type="button" class="btn btn-secondary"
                                                             data-dismiss="modal">Close</button>
                                                         <!-- Add your action button (Block/Unblock) here -->
                                                         <a class="btn <%= prdt.isListed ? 'btn-danger' : 'btn-primary' %>"
                                                             href="/admin/listproduct?_id=<%= prdt._id%>">
                                                             <%= prdt.isListed? 'Unlist' : 'List' %>
                                                         </a>
                                                     </div>
                                                 </div>
                                             </div>
                                         </div>
                                          
                                          <!-- <script>
                                            function confirmAction() {
                                              $('#confirmationModal').modal('show'); // Show the modal
                                              return false; // Prevent the default action (navigation)
                                            }
                                          </script>
                                           -->




                                    </tr>
                         <%   }) %>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
            <div class="pagination-container text-center">
                <% if (currentPage > 1) { %>
                  <a href="?search=<%= search %>&page=<%= currentPage - 1 %>" class="pagination-arrow previous"><</a>
                <% } %>
                <% for (let i = 1; i <= totalPages; i++) { %>
                  <a href="?search=<%= search %>&page=<%= i %>" class="pagination-number fs-5 fw-bold<%= i === currentPage ? ' active' : '' %>"><%= i %></a>
                <% } %>
                <% if (currentPage < totalPages) { %>
                  <a href="?search=<%= search %>&page=<%= parseInt(currentPage) + 1 %>" class="pagination-arrow next">></a>
                <% } %>
              </div>
                
                 <!-- <ul class="d-flex justify-content-center align-items-center">
                    <li class="p-2 border border-2" <% if(currentPage<=1){ %>style="pointer-events: none;"<%} %> ><a href="#"  data-page-no=<%=currentPage-1%> class="page-item text-dark fw-bold"><</a></li>
                    <li class="p-2 border border-2"><a href="#" data-page-no=<%= currentPage %> class="page-item text-dark fw-bold"><%=currentPage%></a></li>
                    <li class="p-2 border border-2" <% if(currentPage>=totalPages){ %>style="pointer-events: none;"<%} %>><a href="#" data-page-no=<%= parseInt(currentPage)+1%> class="page-item text-dark fw-bold">></a></li>
                   </ul> -->
            </div>
            

        </main>
        <!-- MAIN -->
    </section>
    <!-- CONTENT -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="/admin/js/alertMessage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


    <%- include("../admin/footerpage.ejs") %>